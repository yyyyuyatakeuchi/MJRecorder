<div class="mypageLink">
  <%= link_to "マイページ>>", '#' %>
</div>

<div id="target">
  <select v-model="selected" v-on:change="jump" class="gameCount">
    <option v-for="option in options" v-bind:value="option.value">
      {{ option.text }}
    </option>
  </select>
</div>
<div class="mark">
 <ul>
  <li>▽</li>
  <li>▽</li>
  <ul>
</div>

<div class="form_content">
  <%= form_tag(calculation_calculate_path, method: :get) do %>
    <div class="rate">
      <small>Ratings:</small>
      <%= select_tag(:rates,options_for_select([['レート×1',1],2,3,4,5,6,7,8,9,10], :selected => @rates)) %>
    </div>
    <% @matchs.times do |n| %>
      <div class="number_field">
        <small><%= "#{n+1}回目" %></small>
        <%= number_field(:number, "#{n+1}", in: -300..1500) %>
      </div>
    <% end %>
    <%= hidden_field_tag :matchs, @matchs %>
    <div class="result_button">
      <%= submit_tag "点数間違いなし" ,class:"result_btn" %>
    </div>
  <% end %>
</div>

<div class="result">
  <h3>計算結果</h3>
  <p id="app">{{message}}</p>
</div>

<p>計算式</p>
<%= @cal_formula %>
<br>
<%= "= ( #{@score_total} ) - #{250 * @matchs}" if @score_total %><br>
<%= "( #{@result_total} × 10 ) × rating:#{@rates}" if @score_total %>
<%#= @score_record %>




<script>
  var app = new Vue({
    el: "#app",
      data: {
        message: "",
      }
   })
app.message = "<%= @result %>";
</script>




<script>
new Vue({
    el: '#target',
    data: {
      selected: 1,
      options: [
        { text: '半荘回数', value: 1 },
        { text: '1回', value: 1 },
        { text: '2回', value: 2 },
        { text: '3回', value: 3 },
        { text: '4回', value: 4 },
        { text: '5回', value: 5 },
        { text: '6回', value: 6 },
        { text: '7回', value: 7 },
        { text: '8回', value: 8 },
        { text: '9回', value: 9 },
        { text: '10回', value: 10 },
        { text: '11回', value: 11 },
        { text: '12回', value: 12 },
      ]
    },
    methods: {
        jump: function(e){
          location.href = "/calculation/"+e.target.value;
        }
    }
  })
</script>
